<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>قائمة الطعام</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div id="menu"></div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            fetch('https://raw.githubusercontent.com/Hamddyy/Res/refs/heads/main/products.json')
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.json();
                })
                .then(data => {
                    const menuContainer = document.getElementById('menu');
                    data.forEach(item => {
                        const menuItem = document.createElement('div');
                        menuItem.innerHTML = `
                        <div class="products-container">
                            <div class="product">
                                <img src="${item.image}" alt="${item.name}" class="product-image">
                                <div class="product-details">
                                    <h3>${item.name}</h3>
                                    <p>${item.description || 'لا يوجد وصف'}</p>
                                    <p class="price">${item.price} EGP</p>
                                    <button class="add-to-cart" onclick="addToCart('${item.name}', ${item.price}, '${item.image}')">أضف إلى السلة</button>
                                </div>
                            </div>
                        </div>
                        `;
                        menuContainer.appendChild(menuItem);
                    });
                })
                .catch(error => console.error('Error fetching the menu:', error));
        });
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>متجر الطعام</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        body {
            margin: 0;
            height: 100vh;
            background-image: url("https://raw.githubusercontent.com/Hamddyy/Res/refs/heads/main/images/back.jpg");
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed;
        }
    </style>
</head>
<body>
    <!-- شريط التنقل الثابت -->
    <div class="navbar">
        <div class="logo">
            <img src="https://raw.githubusercontent.com/Hamddyy/Res/refs/heads/main/images/icon.png" alt="لوجو الموقع">
        </div>
        <div class="search-container">
            <input type="text" placeholder="ابحث عن المنتجات..." id="search-box">
            <button onclick="searchProducts()">بحث</button>
        </div>
        <div class="language-switch">
            <span onclick="changeLanguage()"> اللغة</span>
        </div>
    </div>

    <!-- سلة المشتريات العائمة -->
    <div class="floating-cart" onclick="toggleCart()">
        <span id="cart-count">0</span> <br>
        <div class="cart-icon">
            <img src="https://raw.githubusercontent.com/Hamddyy/Res/refs/heads/main/images/cart.png" alt="سلة المشتريات">
            <div class="cart-details">
                <span class="cart-total">0 جنيه</span>
            </div>
        </div>
    </div>

    <!-- سلة المشتريات المنسدلة -->
    <div id="cart-dropdown" class="cart-dropdown">
        <div id="cart-close-btn" class="cart-close-btn" onclick="closeCart()">×</div>
        <ul id="cart-list"></ul>
        <div class="total-amount">
            إجمالي المبلغ: <span class="cart-total">0 جنيه</span>
        </div>
        <button id="send-order" onclick="sendOrder()">إرسال الطلب</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const navbar = document.querySelector('.navbar');
            setTimeout(() => {
                navbar.style.opacity = 1;
            }, 100);
        });

        function searchProducts() {
            const query = document.getElementById('search-box').value.toLowerCase();
            const products = document.querySelectorAll('.product');
            products.forEach(product => {
                const productName = product.querySelector('h3').textContent.toLowerCase();
                if (productName.includes(query)) {
                    product.style.display = 'block';
                } else {
                    product.style.display = 'none';
                }
            });
        }

        function changeLanguage() {
            alert('تغيير اللغة');
        }

        let cart = [];

        function addToCart(name, price, image) {
            cart.push({ name, price, image });
            updateCartDisplay();
        }

        function updateCartDisplay() {
            const cartList = document.getElementById("cart-list");
            const cartCount = document.getElementById("cart-count");
            const cartTotals = document.querySelectorAll(".cart-total");

            cartList.innerHTML = "";
            let total = 0;

            cart.forEach((item, index) => {
                const li = document.createElement("li");
                li.classList.add("cart-item");
                li.innerHTML = `
                    <img src="${item.image}" class="cart-item-image">
                    <span class="cart-item-price">${item.price} جنيه</span>
                    <span class="cart-item-name">${item.name}</span>
                    <span class="delete-btn" onclick="removeFromCart(${index})"> × </span>
                `;
                cartList.appendChild(li);
                total += item.price;
            });

            cartTotals.forEach(element => {
                element.textContent = `${total} جنيه`;
            });

            cartCount.textContent = cart.length;
        }

        function removeFromCart(index) {
            cart.splice(index, 1);
            updateCartDisplay();
        }

        function toggleCart() {
            const cartDropdown = document.getElementById("cart-dropdown");
            cartDropdown.classList.toggle("show");
        }

        function closeCart() {
            const cartDropdown = document.getElementById("cart-dropdown");
            cartDropdown.classList.remove("show");
        }

        function sendOrder() {
            if (!cart.length) {
                alert("السلة فارغة!");
                return;
            }

            const message = cart
                .map((item) => `${item.name}: ${item.price} جنيه`)
                .join("\n");

            const total = cart.reduce((sum, item) => sum + item.price, 0);
            const phone = "201288316889";
            const whatsappUrl = `https://wa.me/${phone}?text=${encodeURIComponent(
                message + `\nالإجمالي: ${total} جنيه`
            )}`;

            window.location.href = whatsappUrl;
        }
    </script>
</body>
</html>
